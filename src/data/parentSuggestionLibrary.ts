import type { Subject } from '../types';

export type SuggestionLibraryEntry = {
  id: string;
  subject: Subject;
  gradeBand: 'g3_5' | 'g6_8' | 'any';
  action: string;
  timeMinutes: number;
  whyTemplate: (context: { mastery?: number | null; concept?: string | null }) => string;
};

export const parentSuggestionLibrary: SuggestionLibraryEntry[] = [
  // Math 3–5
  {
    id: 'math-fractions-explain',
    subject: 'math',
    gradeBand: 'g3_5',
    action: 'Ask them to explain how they knew 3/4 is larger than 2/3.',
    timeMinutes: 5,
    whyTemplate: ({ mastery }) =>
      `Recent checkpoint ${mastery != null ? `${Math.round(mastery)}%` : 'scores need a boost'} on fractions.`,
  },
  {
    id: 'math-fractions-benchmark',
    subject: 'math',
    gradeBand: 'g3_5',
    action: 'Draw a number line and place 1/2, 3/4, and 5/8 together.',
    timeMinutes: 6,
    whyTemplate: () => 'Benchmarking fractions tightens number sense.',
  },
  {
    id: 'math-word-problem-markup',
    subject: 'math',
    gradeBand: 'g3_5',
    action: 'Pick one word problem and underline the numbers and units together.',
    timeMinutes: 5,
    whyTemplate: () => 'Missed story problems this week; this builds setup habits.',
  },
  {
    id: 'math-multiplication-race',
    subject: 'math',
    gradeBand: 'g3_5',
    action: 'Race on 10 multiplication facts, then swap roles so they quiz you.',
    timeMinutes: 5,
    whyTemplate: () => 'Fluency speed dipped; quick practice builds confidence.',
  },
  {
    id: 'math-arrays',
    subject: 'math',
    gradeBand: 'g3_5',
    action: 'Use objects (coins, beans) to build a 4x6 array and count by groups.',
    timeMinutes: 7,
    whyTemplate: () => 'Connects multiplication to a visual model.',
  },
  {
    id: 'math-place-value',
    subject: 'math',
    gradeBand: 'g3_5',
    action: 'Write a 3-digit number and ask which digit shows the tens place.',
    timeMinutes: 5,
    whyTemplate: () => 'Recent place value mistakes; this reinforces positions.',
  },
  {
    id: 'math-division-sharing',
    subject: 'math',
    gradeBand: 'g3_5',
    action: 'Split 24 snacks into 6 bags together; talk about equal groups.',
    timeMinutes: 6,
    whyTemplate: () => 'Clarifies division as equal sharing.',
  },
  {
    id: 'math-measurement',
    subject: 'math',
    gradeBand: 'g3_5',
    action: 'Estimate and then measure the length of a table in inches and centimeters.',
    timeMinutes: 8,
    whyTemplate: () => 'Connects estimation to real measurements.',
  },
  // Math 6–8
  {
    id: 'math-ratios-proportion',
    subject: 'math',
    gradeBand: 'g6_8',
    action: 'Ask them to set up a proportion for a real scenario (doubling a recipe).',
    timeMinutes: 7,
    whyTemplate: ({ mastery }) =>
      `Ratio unit checkpoint ${mastery != null ? `${Math.round(mastery)}%` : 'needs practice'}.`,
  },
  {
    id: 'math-unit-rate',
    subject: 'math',
    gradeBand: 'g6_8',
    action: 'Compare two prices and find the unit rate (cost per ounce).',
    timeMinutes: 7,
    whyTemplate: () => 'Unit rates are a sticky spot; this keeps it concrete.',
  },
  {
    id: 'math-linear-graph',
    subject: 'math',
    gradeBand: 'g6_8',
    action: 'Graph y = 2x + 1 on paper and label slope and intercept together.',
    timeMinutes: 8,
    whyTemplate: () => 'Missed slope questions recently; this reinforces fundamentals.',
  },
  {
    id: 'math-integers-numberline',
    subject: 'math',
    gradeBand: 'g6_8',
    action: 'Add a positive and negative number on a number line you draw together.',
    timeMinutes: 6,
    whyTemplate: () => 'Tutor chats showed confusion on negatives; number lines help.',
  },
  {
    id: 'math-percent-discount',
    subject: 'math',
    gradeBand: 'g6_8',
    action: 'Pick a price and calculate a 20% discount, then the new total.',
    timeMinutes: 7,
    whyTemplate: () => 'Applies percent skills to something tangible (shopping).',
  },
  {
    id: 'math-two-step-equations',
    subject: 'math',
    gradeBand: 'g6_8',
    action: 'Solve 2x + 3 = 11 together; show each step on paper.',
    timeMinutes: 8,
    whyTemplate: () => 'Reinforces isolating variables with inverse operations.',
  },
  {
    id: 'math-geometry-angles',
    subject: 'math',
    gradeBand: 'g6_8',
    action: 'Identify complementary vs. supplementary angles in a quick sketch.',
    timeMinutes: 6,
    whyTemplate: () => 'Angle vocab mistakes; a sketch clarifies relationships.',
  },
  {
    id: 'math-statistics-center',
    subject: 'math',
    gradeBand: 'g6_8',
    action: 'List 5 numbers and find the mean and median together.',
    timeMinutes: 6,
    whyTemplate: () => 'Solidifies measures of center with small data.',
  },
  // ELA 3–5
  {
    id: 'ela-main-idea',
    subject: 'english',
    gradeBand: 'g3_5',
    action: 'Read a short paragraph and ask for a 1-sentence main idea.',
    timeMinutes: 5,
    whyTemplate: () => 'Nonfiction main idea dipped; practice summarizing.',
  },
  {
    id: 'ela-key-details',
    subject: 'english',
    gradeBand: 'g3_5',
    action: 'After a paragraph, ask for two key details that support the main idea.',
    timeMinutes: 6,
    whyTemplate: () => 'Connects main ideas to evidence.',
  },
  {
    id: 'ela-vocab-sketch',
    subject: 'english',
    gradeBand: 'g3_5',
    action: 'Pick 3 new words and have them draw a quick sketch for each.',
    timeMinutes: 7,
    whyTemplate: () => 'Boosts vocab retention without worksheets.',
  },
  {
    id: 'ela-context-clues',
    subject: 'english',
    gradeBand: 'g3_5',
    action: 'Find an unfamiliar word and guess its meaning from surrounding sentences.',
    timeMinutes: 6,
    whyTemplate: () => 'Builds context clue habits for decoding.',
  },
  {
    id: 'ela-sequence',
    subject: 'english',
    gradeBand: 'g3_5',
    action: 'After a story, have them list 3 events in order using first/next/last.',
    timeMinutes: 5,
    whyTemplate: () => 'Sequencing strengthens comprehension.',
  },
  {
    id: 'ela-opinion-reason',
    subject: 'english',
    gradeBand: 'g3_5',
    action: 'Ask for an opinion about a character and one reason to support it.',
    timeMinutes: 6,
    whyTemplate: () => 'Pairs claims with reasons in a low-stakes way.',
  },
  {
    id: 'ela-fluency-read',
    subject: 'english',
    gradeBand: 'g3_5',
    action: 'Read a short passage aloud twice; listen for smoother pacing the second time.',
    timeMinutes: 5,
    whyTemplate: () => 'Repeated reading boosts fluency.',
  },
  {
    id: 'ela-sentence-expand',
    subject: 'english',
    gradeBand: 'g3_5',
    action: 'Take a short sentence and add where/when details together.',
    timeMinutes: 5,
    whyTemplate: () => 'Expanding sentences builds richer writing.',
  },
  // ELA 6–8
  {
    id: 'ela-claim-evidence',
    subject: 'english',
    gradeBand: 'g6_8',
    action: 'After a short article, ask for the claim and two pieces of evidence.',
    timeMinutes: 8,
    whyTemplate: () => 'Missed evidence questions; this cements structure.',
  },
  {
    id: 'ela-counterclaim',
    subject: 'english',
    gradeBand: 'g6_8',
    action: 'State a claim, then ask them to name a counterclaim and rebuttal.',
    timeMinutes: 8,
    whyTemplate: () => 'Strengthens argument structure.',
  },
  {
    id: 'ela-summary-text',
    subject: 'english',
    gradeBand: 'g6_8',
    action: 'Have them text you a 2-sentence summary of what they read today.',
    timeMinutes: 5,
    whyTemplate: () => 'Keeps summaries concise and focused.',
  },
  {
    id: 'ela-tone-mood',
    subject: 'english',
    gradeBand: 'g6_8',
    action: 'Pick a paragraph and identify tone or mood words together.',
    timeMinutes: 6,
    whyTemplate: () => 'Clarifies tone vs. mood with evidence.',
  },
  {
    id: 'ela-structure',
    subject: 'english',
    gradeBand: 'g6_8',
    action: 'Name the text structure (cause/effect, compare/contrast) of a short piece.',
    timeMinutes: 6,
    whyTemplate: () => 'Improves comprehension of informational texts.',
  },
  {
    id: 'ela-vocab-frayer',
    subject: 'english',
    gradeBand: 'g6_8',
    action: 'Pick one tough vocab word; define it, give an example, non-example, and sketch.',
    timeMinutes: 8,
    whyTemplate: () => 'Deepens word knowledge beyond definitions.',
  },
  {
    id: 'ela-paraphrase',
    subject: 'english',
    gradeBand: 'g6_8',
    action: 'Paraphrase a sentence together without changing the meaning.',
    timeMinutes: 5,
    whyTemplate: () => 'Builds summarizing and avoids copy/paste thinking.',
  },
  {
    id: 'ela-inference',
    subject: 'english',
    gradeBand: 'g6_8',
    action: 'Read a short scene and ask, “What can we infer that isn’t said directly?”',
    timeMinutes: 6,
    whyTemplate: () => 'Inference errors are common; practice reading between lines.',
  },
  // Science 6–8
  {
    id: 'science-variables',
    subject: 'science',
    gradeBand: 'g6_8',
    action: 'Identify the variable and control in a simple scenario (e.g., growing plants).',
    timeMinutes: 7,
    whyTemplate: () => 'Misidentified variables on a quiz; this grounds the concept.',
  },
  {
    id: 'science-data-reading',
    subject: 'science',
    gradeBand: 'g6_8',
    action: 'Look at a simple chart (weather or sports) and ask what trend they see.',
    timeMinutes: 6,
    whyTemplate: () => 'Recent chart-reading errors; practice spotting trends.',
  },
  {
    id: 'science-hypothesis',
    subject: 'science',
    gradeBand: 'g6_8',
    action: 'Given a question, draft a simple hypothesis together (“If…, then…”).',
    timeMinutes: 6,
    whyTemplate: () => 'Strengthens experiment planning.',
  },
  {
    id: 'science-claim-evidence',
    subject: 'science',
    gradeBand: 'g6_8',
    action: 'After a short article, ask for one claim and the evidence that supports it.',
    timeMinutes: 7,
    whyTemplate: () => 'Connects science reading to CER writing.',
  },
  {
    id: 'science-cause-effect',
    subject: 'science',
    gradeBand: 'g6_8',
    action: 'Name a cause/effect pair in a recent topic (e.g., heating -> particle motion).',
    timeMinutes: 5,
    whyTemplate: () => 'Keeps focus on causal relationships.',
  },
  {
    id: 'science-vocab-card',
    subject: 'science',
    gradeBand: 'g6_8',
    action: 'Pick two key terms; write term, definition, and a real-world example.',
    timeMinutes: 7,
    whyTemplate: () => 'Anchors vocab to examples.',
  },
  {
    id: 'science-model',
    subject: 'science',
    gradeBand: 'g6_8',
    action: 'Sketch a simple model (e.g., water cycle) and label the parts together.',
    timeMinutes: 8,
    whyTemplate: () => 'Modeling deepens understanding of processes.',
  },
  {
    id: 'science-graph-axes',
    subject: 'science',
    gradeBand: 'g6_8',
    action: 'Look at a graph and identify what the x- and y-axes measure.',
    timeMinutes: 5,
    whyTemplate: () => 'Axis mix-ups are common; quick check builds habits.',
  },
  // Social Studies / Any
  {
    id: 'social-timeline',
    subject: 'social_studies',
    gradeBand: 'any',
    action: 'Place three events from a unit on a simple timeline together.',
    timeMinutes: 7,
    whyTemplate: () => 'Timelines support chronology and cause/effect.',
  },
  {
    id: 'social-perspective',
    subject: 'social_studies',
    gradeBand: 'any',
    action: 'Read a short blurb and ask whose perspective is missing.',
    timeMinutes: 6,
    whyTemplate: () => 'Builds source analysis and empathy.',
  },
  {
    id: 'social-claim-evidence',
    subject: 'social_studies',
    gradeBand: 'any',
    action: 'Pick a historical claim and list two pieces of supporting evidence.',
    timeMinutes: 7,
    whyTemplate: () => 'Links claims to evidence in history reading.',
  },
  {
    id: 'social-map',
    subject: 'social_studies',
    gradeBand: 'any',
    action: 'Find a place on a map and describe why it mattered in a unit.',
    timeMinutes: 6,
    whyTemplate: () => 'Connects geography to events.',
  },
  {
    id: 'social-cause-effect',
    subject: 'social_studies',
    gradeBand: 'any',
    action: 'Name one cause and one effect of an event you’ve studied.',
    timeMinutes: 5,
    whyTemplate: () => 'Reinforces causal thinking in history.',
  },
  {
    id: 'social-source-type',
    subject: 'social_studies',
    gradeBand: 'any',
    action: 'Decide if a source is primary or secondary and why.',
    timeMinutes: 5,
    whyTemplate: () => 'Clarifies source types for DBQ-style tasks.',
  },
  {
    id: 'social-summary',
    subject: 'social_studies',
    gradeBand: 'any',
    action: 'Summarize today’s lesson in two sentences focusing on who/what/why.',
    timeMinutes: 5,
    whyTemplate: () => 'Short summaries build recall of key facts.',
  },
  {
    id: 'social-compare',
    subject: 'social_studies',
    gradeBand: 'any',
    action: 'Compare two leaders or events with one similarity and one difference.',
    timeMinutes: 7,
    whyTemplate: () => 'Promotes compare/contrast thinking.',
  },
  // Study skills / Any
  {
    id: 'study-plan-day',
    subject: 'study_skills',
    gradeBand: 'any',
    action: 'List the top 3 tasks for tomorrow with estimated minutes each.',
    timeMinutes: 6,
    whyTemplate: () => 'Planning ahead reduces stress and improves follow-through.',
  },
  {
    id: 'study-breaks',
    subject: 'study_skills',
    gradeBand: 'any',
    action: 'Set a 20-minute focus timer and a 5-minute break together.',
    timeMinutes: 5,
    whyTemplate: () => 'Structured breaks boost focus.',
  },
  {
    id: 'study-environment',
    subject: 'study_skills',
    gradeBand: 'any',
    action: 'Tidy the study space and remove one distraction (phone, tabs).',
    timeMinutes: 5,
    whyTemplate: () => 'Environment tweaks can quickly improve focus.',
  },
  {
    id: 'study-checklist',
    subject: 'study_skills',
    gradeBand: 'any',
    action: 'Create a 3-step checklist for starting work (materials, timer, goal).',
    timeMinutes: 6,
    whyTemplate: () => 'Routines lower the barrier to starting.',
  },
  {
    id: 'study-reflection',
    subject: 'study_skills',
    gradeBand: 'any',
    action: 'Ask “What went well today? What was hard? One change for tomorrow?”',
    timeMinutes: 6,
    whyTemplate: () => 'Short reflections build self-awareness.',
  },
  {
    id: 'study-active-recall',
    subject: 'study_skills',
    gradeBand: 'any',
    action: 'Close a book and jot 3 things remembered, then check gaps.',
    timeMinutes: 7,
    whyTemplate: () => 'Active recall strengthens memory more than re-reading.',
  },
  {
    id: 'study-note-rewrite',
    subject: 'study_skills',
    gradeBand: 'any',
    action: 'Rewrite one messy set of notes into bullet points.',
    timeMinutes: 8,
    whyTemplate: () => 'Clean notes improve review later.',
  },
  {
    id: 'study-teach-back',
    subject: 'study_skills',
    gradeBand: 'any',
    action: 'Have them teach you one concept from today using simple words.',
    timeMinutes: 6,
    whyTemplate: () => 'Teaching back surfaces gaps and boosts mastery.',
  },
  {
    id: 'study-sleep-check',
    subject: 'study_skills',
    gradeBand: 'any',
    action: 'Plan a consistent bedtime this week; agree on a lights-out time.',
    timeMinutes: 5,
    whyTemplate: () => 'Sleep drives focus and retention.',
  },
  {
    id: 'study-motivation',
    subject: 'study_skills',
    gradeBand: 'any',
    action: 'Write one short-term goal (this week) and one reason it matters.',
    timeMinutes: 6,
    whyTemplate: () => 'Connecting goals to reasons boosts follow-through.',
  },
  {
    id: 'study-organize-binder',
    subject: 'study_skills',
    gradeBand: 'any',
    action: 'Spend 10 minutes organizing a binder or backpack together.',
    timeMinutes: 10,
    whyTemplate: () => 'Organization cuts down on lost work and stress.',
  },
  {
    id: 'study-read-backwards',
    subject: 'study_skills',
    gradeBand: 'any',
    action: 'Proofread a short paragraph backwards sentence by sentence.',
    timeMinutes: 6,
    whyTemplate: () => 'Catching errors improves writing quality.',
  },
  {
    id: 'study-small-reward',
    subject: 'study_skills',
    gradeBand: 'any',
    action: 'Set a small reward after finishing one tough task.',
    timeMinutes: 5,
    whyTemplate: () => 'Tiny rewards can boost motivation.',
  },
  {
    id: 'study-chunk-task',
    subject: 'study_skills',
    gradeBand: 'any',
    action: 'Break one big task into three smaller steps together.',
    timeMinutes: 7,
    whyTemplate: () => 'Chunking makes big tasks feel doable.',
  },
];
