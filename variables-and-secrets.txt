Project variables & secrets
===========================

Where to set them
- Netlify (or hosting env): frontend env vars exposed at build/runtime.
- Server runtime: same as Netlify if the API runs there; otherwise your API host’s env.
- Supabase: manage database credentials/keys in the Supabase dashboard; no hardcoding in repo.

Core Supabase
- SUPABASE_URL (Netlify + server runtime) – Supabase project URL.
- SUPABASE_ANON_KEY (Netlify + server runtime) – public anon key for client.
- SUPABASE_SERVICE_ROLE_KEY (server runtime only) – service role key for backend tasks/webhooks.

API / App
- APP_BASE_URL (Netlify + server runtime) – site origin, used for checkout/portal return URLs.
- ENFORCE_PLAN_LIMITS (server runtime; optional, default "false") – set to "true" to gate AI/lessons by plan.

Billing / Stripe
- STRIPE_SECRET_KEY (server runtime) – Stripe secret.
- STRIPE_WEBHOOK_SECRET (server runtime) – webhook signing secret for /api/v1/billing/webhook.
- STRIPE_PRICE_INDIVIDUAL_FREE / STRIPE_PRICE_INDIVIDUAL_PLUS / STRIPE_PRICE_INDIVIDUAL_PRO (server runtime) – price IDs → plan slugs individual-free/plus/pro.
- (Legacy) STRIPE_PRICE_FAMILY_FREE / STRIPE_PRICE_FAMILY_PLUS / STRIPE_PRICE_FAMILY_PREMIUM – kept for existing family-* subscriptions.
- DEFAULT_PREMIUM_PLAN_SLUG (server runtime; optional, default "individual-pro") – override default premium slug.
- BILLING_SANDBOX_MODE (server runtime; optional, default "false") – set to "true" to bypass Stripe and auto-activate plans.
- BILLING_BYPASS_PARENTS (server runtime; optional, default empty) – comma-separated parent UUIDs or emails to auto-activate premium.

Monitoring / Analytics (if used)
- SENTRY_DSN (Netlify + server runtime; optional) – Sentry DSN for monitoring.
- SENTRY_ENVIRONMENT (server runtime; optional) – environment label for Sentry.
- SENTRY_TRACES_SAMPLE_RATE (server runtime; optional) – sample rate for traces.
- POSTHOG_API_KEY or similar (Netlify; optional) – if analytics is wired in your deploy.
- API_METRIC_SAMPLE_RATE (server runtime; optional, default 0.05) – sample rate for API timing logs.
- API_SLOW_THRESHOLD_MS (server runtime; optional, default 750) – mark slow API calls for warning-level logging.

Import queue / workers
- ENABLE_INLINE_IMPORT_QUEUE (server runtime; optional, default false in production) – run import worker inside API server.
- IMPORT_WORKER_POLL_MS (server runtime; optional, default 5000) – poll interval for dedicated import worker.

AI / Tutor
- OPENROUTER_API_KEY (server runtime) – API key for tutor routing.
- VITE_OPENROUTER_API_KEY (Netlify; optional) – same key exposed to frontend if needed.

Local development
- Mirror the above in a `.env` (not committed). Use Supabase service role key only for local server/webhook testing.
